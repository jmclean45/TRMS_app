<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>View Mail</title>
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
	integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
	crossorigin="anonymous">
</head>
<body onload="viewMail()" style="background-color: #e5e4e2">
	<div class=container-fluid
		style="padding: 30px; color: #553119;border: 2px solid; background-color: #ffc107">
		<h1 style="font-size:60px;font-style:bold" class=text-center>Notifications</h1>
	</div>

	 <div class="container-fluid">
        <table class="table table-striped">
			<tr>
				<th>Message Id:</th>
				<th>Sent By:</th>
				<th>Date</th>
				<th>Type</th>
				<th>Message</th>
			</tr>
			<tbody id="myMail">
			<tr></tr>
			</tbody>	

		</table>
		</div>
		
</body>

<script>
	function viewMail() {
		console.log("Loading Mail");
		let xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				console.log("Successful Call");
				console.log(this.responseText);
				me = JSON.parse(this.responseText);
				for (i = 0; i < me.length; i++) {
					
				 var x=document.getElementById('myMail').insertRow(0);
				 var y=x.insertCell(0);
				 var b=x.insertCell(1);
				 var c=x.insertCell(2);
				 var d=x.insertCell(3);
				 var e=x.insertCell(4);
				 y.innerHTML=me[i].m_id;
				 b.innerHTML=me[i].sender;
				 c.innerHTML=me[i].m_date;
				d.innerHTML=me[i].type;
				 e.innerHTML=me[i].content;


		}
					
				}
			}
		url = "http://localhost:8080/TRMS-App/viewMail.do"

		console.log(url);
		xhttp.open("GET", url, true);
		//Step 4
		xhttp.send();

	}

	
</script>
</html>